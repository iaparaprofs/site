---
layout: default
---

<h1>Ãšltimas postagens</h1>

{% assign posts_with_titles = site.posts | where_exp: "post", "post.title" %}
<div id="posts">
  {% for post in posts_with_titles limit:10 %}
    <article class="post">
      <header class="post-header">
        <p class="post-date"><a href="{{ post.url | relative_url }}">{{ post.date | date: "%d/%m/%Y" }}</a></p>
        <h2 class="post-title"><a href="{{ post.url | relative_url }}">{{ post.title }}</a></h2>
      </header>
      <p>{{ post.excerpt }}</p>
    </article>
  {% endfor %}
</div>

<button id="loadMore" style="margin: 2rem 0;">Carregar mais</button>

<script>
  const allPosts = [
    {% for post in posts_with_titles %}
      {
        url: "{{ post.url | relative_url }}",
        title: "{{ post.title | escape }}",
        date: "{{ post.date | date: '%d/%m/%Y' }}",
        excerpt: "{{ post.excerpt | strip_newlines | escape }}"
      }
      {% unless forloop.last %},{% endunless %}
    {% endfor %}
  ];

  let loaded = 10;
  const postsContainer = document.getElementById('posts');
  const loadMoreBtn = document.getElementById('loadMore');

  if (loaded >= allPosts.length) {
    loadMoreBtn.style.display = 'none';
  }

  loadMoreBtn.addEventListener('click', () => {
    const next = allPosts.slice(loaded, loaded + 10);

    next.forEach(p => {
      postsContainer.innerHTML += `
        <article class="post">
          <header class="post-header">
            <p class="post-date"><a href="${p.url}">${p.date}</a></p>
            <h2 class="post-title"><a href="${p.url}">${p.title}</a></h2>
          </header>
          <p>${p.excerpt}</p>
        </article>`;
    });

    loaded += 10;

    if (loaded >= allPosts.length) {
      loadMoreBtn.style.display = 'none';
    }
  });
</script>
